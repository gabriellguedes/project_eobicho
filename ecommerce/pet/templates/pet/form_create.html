{% extends 'core/base.html' %}
{% load static %}
{% load widget_tweaks %}
{% load bootstrap %}
{% block content %}
<section class="container">
  <form method="POST" novalidate>
      {% csrf_token %}
      <legend class="border-bottom">Dados do Pet</legend>
      <div class="col">
        
          <div class="col-sm-12">
            {% for field in form.visible_fields %}
              <div class="form-group{% if field.errors %} has-error {% endif%}">
                <label for="{{ field.id_for_label }}">
                  {% if field.field.required %}
                    <span class="required">{{ field.label }} </span>
                  {% else %}
                    {{ field.label }}
                  {% endif %}
                </label>
                {% render_field field class="form-control" %}
                {% for error in field.errors %}
                  <span class="text-muted">{{ error }}</span>
                {% endfor %}
                </div>
              {% endfor %}
              {{ formset.management_form }}
          </div>
      </div>
      
      <div class="col">
        <div class="col-sm-12">
          <legend class="border-bottom">Ficha de Anamnese</legend>
          
            {% for item_estoque_form in formset %}
              <div id="item-{{ forloop.counter0 }}" class="">
                {{ item_estoque_form|bootstrap }}
              </div>
            {% endfor %}
          
        </div>
      </div>

      <div class="d-flex justify-content-end">
        <button class="btn btn-primary mr-sm-2" value="Save">
          <i class="fa fa-floppy-o"></i>Salvar
        </button>
        
        <a href="{% url 'pet:list' %}" class="btn btn-danger">
          <i class="fa fa-times"></i>Cancelar
        </a>
      
      </div>
  </form>
</section>  
{% endblock content %}

{% block js %}
  <script src="{% static 'js/style.js' %}"></script>

  <script type="text/html" id="item-estoque">
    <div id="item-__prefix__" class="form-group">
    {{ formset.empty_form|bootstrap }}
    </div>
  </script>
{% endblock js %}
