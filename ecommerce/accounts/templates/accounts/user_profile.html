{% extends 'core/base.html' %}
{% block title %}
	{{block.super}} - Visualizar Perfil
{% endblock title%}
{% load static %}
{% load bootstrap %}
{% load permission_tags %}
{% block content %}
	{% if cliente == request.user or user|can:'view_funcionario' %}
		<section class="container py-4">
			<div>
				{% if profile.photo.url != None %}
					<div class="w-100 d-flex justify-content-center mb-4">
				        <span class="circle-pet-update">         
				          <img class="mask" src="{{profile.photo.url}}" alt="Foto de perfil do pet">
				        </span>
				    </div>
			    {% else %}
			    	<div class="w-100 d-flex justify-content-center mb-4">
				        <span class="circle-pet-update">         
				          <img class="mask" src="{% static 'img/user-default.png' %}" alt="Foto de perfil do pet">
				        </span>
				    </div>
			    {% endif %}
		      
			</div>

			<div class="mt-3 container">
				
				<h4 class="border-bottom text-secondary title-2 pb-2 mb-3 row">
					<label class="w-75 d-block">
						<i class="fa-solid fa-file text-info"></i> Dados Pessoais
					</label>
					<label class="w-25 d-block text-end">
						<small>
							<span class="text-info font-weight-bold">Id:</span> {{cliente.id}}
						</small>
					</label>
				</h4>
				<div class="row">
					<div class="col-md-4 mb-2">
						<label class="text-info font-weight-bold mr-2">Nome:</label>{{cliente.first_name}}
					</div>
					<div class="col-md-4 mb-2">
						<label class="text-info font-weight-bold mr-2">Email:</label>{{cliente.email}}
					</div>
					<div class="col-md-4 mb-2">
						<label class="text-info font-weight-bold mr-2">Telefone:</label>{{profile.telefone}}
					</div>
					<div class="col-md-4 mb-2">
						<label class="text-info font-weight-bold mr-2">CPF:</label>{{profile.cpf}}
					</div>
					<div class="col-md-4">
						<label class="text-info font-weight-bold mr-2">Aniversário:</label>{{profile.aniversario}}
					</div>
					<div class="col-md-4">
						<label class="text-info font-weight-bold mr-2"></label>
					</div>
				</div>
				<!-- Enderço cadastrado pelo Usuário -->
				<h4 class="text-secondary border-bottom pb-2 my-3">
					<i class="fa-solid fa-location-dot text-info"></i> Endereço
				</h4>
				<div class="row">
					<div class="col-md-4 mb-2">
						<label class="text-info font-weight-bold mr-2">CEP:</label>{{endereco.cep}}
					</div>
					<div class="col-md-4 mb-2">
						<label class="text-info font-weight-bold mr-2">Cidade:</label>{{endereco.cidade}}
					</div>
					<div class="col-md-4 mb-2">
						<label class="text-info font-weight-bold mr-2">UF:</label>{{endereco.uf}}
					</div>
					<div class="col-md-4 mb-2">
						<label class="text-info font-weight-bold mr-2">Bairro:</label>{{endereco.bairro}}
					</div>
					<div class="col-md-4 mb-2">
						<label class="text-info font-weight-bold mr-2">Endereço:</label>{{endereco.endereco}}
					</div>
					<div class="col-md-4 mb-2">
						<label class="text-info font-weight-bold mr-2">Complemento:</label>{{endereco.complemento}}
					</div>
				</div>
				<div class="d-flex justify-content-end my-5">
					<button class="btn btn-info mr-3" type="button" onclick="location.href='{% url 'contas:cliente_update' pk=cliente.id %}'">
					<i class="fa-solid fa-pen"></i> Editar Perfil
					</button>
					<button class="btn btn-outline-info " type="button" onclick="location.href='{% url 'contas:cliente_detail' pk=cliente.id %}'">Voltar</button>
				</div>
			</div>	
		</section>
	{% else %}
	  <section class="container d-flex justify-content-center my-5">
	    <div class="col-md-9 ">
	      <div class="border dados-pet mb-4">
	        <div class="dados-pet-header">
	          <label class="d-block text-center alert alert-danger ">
	              <i class="fa-solid fa-triangle-exclamation mr-2"></i> Atenção
	          </label>    
	        </div>
	        <div class="px-3">
	          <label class="text-secondary d-block mb-3 text-center">

	            <p class="mb-3">
	              <span class="font-weight-bold text-info">{{ request.user.first_name }}</span>
	              você não tem permissão para acessar essa página!
	            </p>
	             
	            <p class="px-4">
	              <small class="text-secondary d-block mb-3 text-justify">
	                Caso você seja uma pesssoa autorizada entre em contato com o administrador do sistema para verificar se alguma das suas permissões foram revogadas.
	              </small>
	            </p>
	            <p class="text-justify px-4"> 
	              <small class="text-info font-italic">Lamentamos a inconveniência.</small>
	            </p>     
	          </label>

	          <div class="text-secondary d-flex justify-content-center mb-4">
	            <a class="btn btn-outline-info" href="{% url 'contas:cliente_detail' pk=user.id %}">
	              <i class="fa-solid fa-chevron-left mr-2"></i> Voltar
	            </a>
	          </div>
	        </div>
	      </div>
	    </div>  
	  </section>
	{% endif %}

{% endblock %}