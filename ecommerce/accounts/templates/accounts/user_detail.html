{% extends 'core/base.html' %}
{% load static %}
{% load bootstrap %}
{% load widget_tweaks %}
{% load permission_tags %}
{% block content %}

{% if user|can:'view_user_cliente' %}
<div class="container py-4">

	{% if cliente.cpf == None or endereco.cep == None  %}
		<div>
			<a href="{% url 'contas:cliente_update' pk=user.id %}">
				<p class="alert alert-primary text-center"> 
					<i class="fa-solid fa-triangle-exclamation"></i>
					Perfil Incompleto, clique aqui para adicionar as informções que faltam!
				</p>
			</a>
		</div>
	{% endif %}

	<section class="mb-3">
		<div class="row py-3">
			<div class="col-md-6 mb-3" id="user_responsive_block">
				{% include 'includes/user_responsive_block.html' %}
								
			</div>
			<div class="col-md-6 mt-2" >	
				<button class="btn btn-info mr-2" onclick="location.href='{% url 'pet:cliente_pet_add' pk=user.id%}'"><i class="fa-solid fa-paw"></i> Novo Pet</button>
			</div>	
		</div>	
	</section>

	<section class="border dados-pet mb-5">
		<div class="bg-dark dados-pet-header pt-2">
			<div class="row">
				<div class="col-md-9">
					<h6 class="font-weight-bold text-white pl-5"><i class="fa-solid fa-paw"></i> Meus Pets</h6>
				</div>
			</div>	
		</div>
		{% if pet %}
		<div class="px-3 py-4">	
			<div class=" row">
				{% for item in pet %}
				<div class="row col-md-5 ml-4">
					<a href="{% url 'pet:pet_detail' pk=item.id %}">
			  				<div class="col-md-2">
								{% if item.photo.url != None %}
								<div class="bg-image hover-overlay hover-zoom hover-shadow ripple">
										<img class="pet-img mb-2 mask" src="{{item.photo.url}}" alt="Foto de perfil do pet">
									</div>	
						  							
						  		{% else %}
						  		<div class="bg-image hover-overlay hover-zoom hover-shadow ripple">
						  			{% if item.sexo  != 'Macho' %}
											<img class="pet-img mb-2 mask" src="{% static 'img/Avatar_Dog-512.png' %}" alt="Foto de perfil do pet">	 	
						  			{% else %}
						  				<img class="pet-img mb-2 mask" src="{% static 'img/dog-avatar.png' %}" alt="Foto de perfil do pet">	 	
						  			{% endif%}
									</div>	
						  		{% endif %}	
						  	</div>	
			  		</a>
			  		<div class="col m-auto">
				  		<label class="text-monospace w-100"><span class="font-weight-bold text-info"> Nome:</span><a href="{% url 'pet:pet_detail' pk=item.id %}"> <span class="font-weight-bold"> {{item.nome}}</span></a> </label>
				  		<label class="text-monospace w-100"><span class="font-weight-bold text-info"> Espécie:</span> {{item.especie}} </label>
				  		<label class="text-monospace w-100"><span class="font-weight-bold text-info"> Raça:</span> {{item.raca.raca}} </label>
				  	</div>	
			  	</div>	
			  	{% endfor %}
			</div>
		</div>
		{% else %}
			<p class="mt-3 alert alert-info">Você ainda não tem nenhum pet cadastrado!</p>
		{% endif %}	
	</section>
</div>	
{% else %}
<div class="my-4">
	<p class="alert alert-danger text-center"><i class="fa-solid fa-triangle-exclamation"></i> Você não tem permissão para acessar essa página.</p>
</div>
{% endif %}
{% endblock %}